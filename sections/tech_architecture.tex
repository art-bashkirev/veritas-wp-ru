\subsection{Обзор проектирования системы}

\textbf{Подход к микросервисам:}
\noindent

Veritas использует архитектуру микросервисов, в которой отдельные службы выполняют отдельные функции:
\noindent
\begin{itemize}
    \itemsep 0em
    \item \textbf{Служба судьи:} \noindent Получает материалы, проверяет их формат, выбирает подходящий контейнер и инициирует распределенное выполнение.
    \item \textbf{Служба прогонщиков:} \noindent Выполняет тестовые примеры в изолированных контейнерах и генерирует вердикты.
    \item \textbf{Агрегатор вердиктов:} \noindent Собирает вердикты от прогонщиков, выполняет дополнительный анализ и сохраняет окончательные результаты.
    \item \textbf{Сервис пользовательского интерфейса:} \noindent Взаимодействует с пользователями, обрабатывает аутентификацию, отображает статус отправки и предоставляет обратную связь.
    \item \textbf{Сервис управления данными:} \noindent Управляет доступом и взаимодействием с распределенными базами данных (Redis, PostgreSQL, MongoDB).
\end{itemize}

\noindent
Каждый сервис работает независимо, взаимодействуя с другими через определенные API. Это позволяет:

\begin{itemize}
    \itemsep 0em
    \item \textbf{Масштабируемость:} \noindent Отдельные сервисы можно масштабировать горизонтально, добавляя новые экземпляры в зависимости от спроса.
    \item \textbf{Управляемость:} \noindent Маленькие, сфокусированные сервисы легче разрабатывать, тестировать и обновлять.
    \item \textbf{Устойчивость к сбоям:} \noindent Сбои в работе сервисов изолированы, что минимизирует влияние на всю систему.
\end{itemize}


\textbf{Механизмы связи:} \noindent Veritas использует различные механизмы связи в зависимости от контекста:

\begin{itemize}
    \itemsep 0em
    \item \textbf{RESTful API:} \noindent Используется для обмена структурированными данными между службами, например для получения представлений или хранения вердиктов.
    \item \textbf{Websockets:} \noindent Смогут обеспечить двунаправленную связь между клиентами и сервером в реальном времени, предоставляя оперативные обновления статуса подачи.
    \item \textbf{Redis Pub/Sub:} \noindent Обеспечивает асинхронную передачу вердиктов между сервисами: прогонщик публикует вердикт по завершении работы, а агрегатор вердиктов подписывается на его получение.
    \item \textbf{Очереди сообщений:} \noindent (Планируется) Для сценариев, требующих буферизации сообщений, будут реализованы с помощью RabbitMQ.
\end{itemize}
Эти механизмы обеспечивают эффективную и масштабируемую связь в распределенной системе.

\textbf{Дополнительные соображения:}
\begin{itemize}
    \itemsep 0em
    \item \textbf{Обнаружение сервисов:} \noindent Такие механизмы, как Consul или Kubernetes, могут быть использованы для динамического определения использования сервисов.
    \item \textbf{Управление конфигурацией:} \noindent Такие инструменты, как Ansible, позволяют управлять конфигурацией распределенных сервисов.
    \item \textbf{Логгинг и мониторинг:} \noindent Распределенные сервисы протоколирования, такие как Atlassian Statuspage, обеспечивают централизованное понимание поведения системы и потенциальных проблем.
\end{itemize}

\subsection{Контайнеризация}
Система предполагает использование контайнеров. Это обеспечивает:
\begin{itemize}
    \itemsep 0em
    \item \textbf{Согласованность:} \noindent Тесты и код выполняются на любой системе, независимо её расположения.
    \item \textbf{Изоляцию:} \noindent Потенциально деструктивный для системы прогонщика код предполагает невозможность выхода за пределы песочницы. 
    \item \textbf{Скорость:} \noindent Предварительно созданные образы контайнеров исключают длительную сборку и направлены на быстрое получение результатов.
\end{itemize}

\subsubsection{Выделенный реестр контайнеров}

Представляемый Container Registry для Docker предполагает автоматическую сборку и обновления образов с инструментами CI/CD.
Ключевым в представимом решении станут системы контроля версий утилит сборки и языков программирования внутри контайнеров в целях обеспечить честность соревнований.


% \subsection{Управление распределенными данными}


% \subsection{Минимизация и оптимизация}

% \subsection{Проверка с помощью искуственного интеллекта}

